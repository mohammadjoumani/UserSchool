package com.example.userschool.view.fragment;import android.content.BroadcastReceiver;import android.content.Context;import android.content.Intent;import android.content.IntentFilter;import android.content.SharedPreferences;import android.os.Bundle;import android.util.Log;import android.view.LayoutInflater;import android.view.View;import android.view.ViewGroup;import android.widget.ImageView;import android.widget.LinearLayout;import android.widget.ProgressBar;import android.widget.TextView;import androidx.annotation.NonNull;import androidx.fragment.app.Fragment;import com.example.userschool.R;import com.example.userschool.connectdb.ConnectDB;import com.example.userschool.query.StudentQuery;import com.example.userschool.view.activity.StudentActivity;import static android.content.Context.MODE_PRIVATE;public class ProfileStudentFragment extends Fragment {    private TextView txtNameAccountFragmentProfileStudent;    private TextView txtPhoneNumberFragmentProfileStudent;    private TextView txtClassNameFragmentProfileStudent;    private ProgressBar progressBarStudentProfileFragment;    private LinearLayout linearContentInfoStudent;    private ConnectDB connectDB;    private StudentQuery studentQuery;    private ImageView imgFragmentStudentProfileEmpty;    private SharedPreferences sharedPreferences;    private int studentID;    public View onCreateView(@NonNull LayoutInflater inflater,                             ViewGroup container,                             Bundle savedInstanceState) {        View view = inflater.inflate( R.layout.fragment_prorfile_student, container, false );        sharedPreferences = getActivity().getSharedPreferences( "studentID", MODE_PRIVATE );        studentID = sharedPreferences.getInt( "studentID", 0 );        txtNameAccountFragmentProfileStudent = view.findViewById( R.id.txtNameAccountFragmentProfileStudent );        txtPhoneNumberFragmentProfileStudent = view.findViewById( R.id.txtPhoneNumberFragmentProfileStudent );        txtClassNameFragmentProfileStudent = view.findViewById( R.id.txtClassNameFragmentProfileStudent );        progressBarStudentProfileFragment = view.findViewById( R.id.progressBarStudentProfileFragment );        imgFragmentStudentProfileEmpty = view.findViewById( R.id.imgFragmentStudentProfileEmpty );        linearContentInfoStudent = view.findViewById( R.id.linearContentInfoStudent );        connectDB = new ConnectDB();        studentQuery = new StudentQuery( getContext() );        studentQuery.callTaskGetStudentInfo(studentID);        progressBarStudentProfileFragment.setVisibility( View.VISIBLE );        IntentFilter intentFilter = new IntentFilter( "studentInfo" );        requireActivity().registerReceiver( broadcastReceiverStudent, intentFilter );        return view;    }    BroadcastReceiver broadcastReceiverStudent = new BroadcastReceiver() {        @Override        public void onReceive(Context context, Intent intent) {            if (connectDB.CONN() == null) {                imgFragmentStudentProfileEmpty.setVisibility( View.VISIBLE );                imgFragmentStudentProfileEmpty.setImageResource( R.drawable.ic_disconnect );                progressBarStudentProfileFragment.setVisibility( View.GONE );                return;            }            txtNameAccountFragmentProfileStudent.setText( studentQuery.getStudent().getName() );            txtPhoneNumberFragmentProfileStudent.setText( studentQuery.getStudent().getPhone() );            txtClassNameFragmentProfileStudent.setText( studentQuery.getStudent().getClassName() );            progressBarStudentProfileFragment.setVisibility( View.GONE );            linearContentInfoStudent.setVisibility( View.VISIBLE );            imgFragmentStudentProfileEmpty.setVisibility( View.GONE );        }    };}