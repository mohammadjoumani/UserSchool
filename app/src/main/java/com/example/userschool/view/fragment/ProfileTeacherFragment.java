package com.example.userschool.view.fragment;import android.content.BroadcastReceiver;import android.content.Context;import android.content.Intent;import android.content.IntentFilter;import android.content.SharedPreferences;import android.os.Bundle;import android.view.LayoutInflater;import android.view.View;import android.view.ViewGroup;import android.widget.ImageView;import android.widget.LinearLayout;import android.widget.ProgressBar;import android.widget.TextView;import androidx.annotation.NonNull;import androidx.fragment.app.Fragment;import com.example.userschool.R;import com.example.userschool.connectdb.ConnectDB;import com.example.userschool.query.TeacherQuery;import static android.content.Context.MODE_PRIVATE;public class ProfileTeacherFragment extends Fragment {    private SharedPreferences sharedPreferences;    private TextView txtNameAccountFragmentProfileTeacher;    private TextView txtSubjectFragmentProfileTeacher;    private ProgressBar progressBarTeacherProfileFragment;    private LinearLayout linearContentInfoTeacher;    private ImageView imgFragmentTeacherProfileEmpty;    private ConnectDB connectDB;    private TeacherQuery teacherQuery;    public View onCreateView(@NonNull LayoutInflater inflater,                             ViewGroup container, Bundle savedInstanceState) {        View view = inflater.inflate( R.layout.fragment_profile_teacher, container, false );        sharedPreferences = getActivity().getSharedPreferences( "teacherID", MODE_PRIVATE );        txtNameAccountFragmentProfileTeacher = view.findViewById( R.id.txtNameAccountFragmentProfileTeacher );        txtSubjectFragmentProfileTeacher = view.findViewById( R.id.txtSubjectFragmentProfileTeacher );        progressBarTeacherProfileFragment = view.findViewById( R.id.progressBarTeacherProfileFragment );        imgFragmentTeacherProfileEmpty = view.findViewById( R.id.imgFragmentTeacherProfileEmpty );        linearContentInfoTeacher = view.findViewById( R.id.linearContentInfoTeacher );        teacherQuery = new TeacherQuery( getContext() );        connectDB = new ConnectDB();        teacherQuery.callTaskGetInfoTeacher( sharedPreferences.getInt( "teacherID", 0 ) );        progressBarTeacherProfileFragment.setVisibility( View.VISIBLE );        IntentFilter intentFilterTeacherInfo = new IntentFilter( "teacherInfo" );        requireActivity().registerReceiver( broadcastReceiverTeacher, intentFilterTeacherInfo );        return view;    }    BroadcastReceiver broadcastReceiverTeacher = new BroadcastReceiver() {        @Override        public void onReceive(Context context, Intent intent) {            if (connectDB.CONN() == null) {                imgFragmentTeacherProfileEmpty.setVisibility( View.VISIBLE );                imgFragmentTeacherProfileEmpty.setImageResource( R.drawable.ic_disconnect );                progressBarTeacherProfileFragment.setVisibility( View.GONE );                return;            }            txtNameAccountFragmentProfileTeacher.setText( teacherQuery.getTeacher().getName() );            txtSubjectFragmentProfileTeacher.setText( teacherQuery.getTeacher().getClassName() );            progressBarTeacherProfileFragment.setVisibility( View.GONE );            linearContentInfoTeacher.setVisibility( View.VISIBLE );            imgFragmentTeacherProfileEmpty.setVisibility( View.GONE );        }    };}